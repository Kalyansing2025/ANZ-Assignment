<div [@routerTransition]>
    <div class="kt-content  kt-grid__item kt-grid__item--fluid kt-grid kt-grid--hor">
        <div class="kt-subheader kt-grid__item">
            <div [class]="containerClass">

                <div class="container-fluid" style="z-index: 1; position: sticky; top: 0">

                    <!-- Navbar1 -->
                     <nav class="navbar navbar-expand-lg navbar-light bg-white "
                        style="margin-left: -60px; margin-right: -60px; margin-top: -30px ">
                        <div class="container-fluid">
                            <a class="navbar-brand" href="#">
                                <select class="form-select-sm"
                                    style="color: rgb(53,198,235); background-color:  rgba(240, 239, 239, 0.801); font-size: 13px; border: none;"
                                    aria-label="Default select example">
                                    <option class="text border-active-light" selected>Quick Action</option>
                                </select>
                            </a>

                            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                                aria-expanded="false" aria-label="Toggle navigation">
                                <span class="navbar-toggler-icon"></span>
                            </button>
                            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                                <ul class="navbar-nav me-auto mb-2 mb-lg-0">

                                </ul>
                                <form class="d-flex">
                                    <div class="mar d-flex">
                                        <div class=" mx-2 me-3">
                                            <i class="bi bi-search  me-5" style="font-size: 20px;"></i>
                                            
                                            <img class="me-4 mb-3" src="../../../assets/bell.png" alt=""
                                                style="width: 28px; ">
                                            <i class="bi bi-gear me-5" style="font-size: 20px;"></i>


                                            <select class="form-select-sm border-0 bg-light mb-2"
                                                aria-label="Default select example">
                                                <option class="text border-active-light">John Deo &nbsp;</option>
                                            </select>

                                            <img class="ms-3" src="../../../assets/Avatar.png" alt=""
                                                style="width: 35px;">

                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </nav> 
                    <!-- end -->

                    <!-- navbar2 -->
                    <nav class="navbar navbar-expand-lg navbar-light bg-white "
                        style="margin-left: -60px; margin-right: -60px; box-shadow: 1px 4px #e6e6e6; ">
                        <div class="container-fluid">

                            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                                    <li class="nav-item" style="color: rgb(53,198,235);">
                                        <a class="nav-link active" aria-current="page" href="#"
                                            style="color: rgb(53,198,235);">Customers</a>
                                    </li>
                                    <!-- <li class="nav-item me-5 mt-2 ">
                                        <span class="text-muted">&nbsp;|&nbsp;Manage costomer and customer user</span>
                                    </li> -->
                                </ul>
                                <form class="d-flex">
                                    <button
                                        style="background-color: rgb(248, 145, 110); color: rgb(255, 255, 255); border-radius: 5px;"
                                        *ngIf="'Pages.Tenant.Customer.CreateCustomer' | permission"
                                        class="btn btn-sm mb-1" (click)="createCustomerModal.show() "><i
                                            class="fa fa-plus text-white"></i> {{"Create New Customer" |
                                        localize}}</button>
                                </form>
                            </div>
                        </div>
                    </nav>
                    <!-- end -->
                </div>

                <!-- card -->
                <div class="card mt-5 shadow p-3  bg-white rounded" style="width: 84%; margin-left: 100px;">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-7">
                                <span class="ms-lg-5" style="font-size: 15px;"> <b>Customers</b></span>
                            </div>

                            <div class="col-5 ">
                                <form autocomplete="off">
                                    <div class="kt-form ">
                                        <div class="row align-items-center kt-margin-b-10">
                                            <div class="col-xl-12">
                                                <div class="form-group" style="margin-right: 70px;">
                                                    <div class="input-group">
                                                        <input [(ngModel)]="filter" name="filterText" autoFocus
                                                            class="form-control border border-right-0"
                                                            [placeholder]="l('SearchWithThreeDot' | localize)"
                                                            type="text" style="margin-left: -20px;">
                                                            
                                                            <button class="btn btn border border-left-0" type="button" id="button-addon2" style="margin-right: 20px;">
                                                                <i class="fa fa-search " style="color: rgb(53,198,235);z-index: 1; font-size: 20px;"></i>
                                                            </button>

                                                        <span class="input-group-btn ms-3">
                                                            <button (click)="getCustomer()" class="btn" type="submit"
                                                                style=" background-color: rgb(53,198,235);"><i
                                                                    class="bi bi-arrow-repeat text-white"
                                                                    style="font-size: 20px;"></i></button>

                                                        </span>
                                                        
                                                    </div>
                                                    
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>


                        <div class="card " style="width: 100%;">
                            <div class="card-body">
                                <!-- table -->
                                <table class="table table-bordered  " style="font-size: small;">
                                    <thead>
                                        <tr class="fw-bold">
                                            <th>
                                                <input type="checkbox" class="form-check-input"
                                                    [(ngModel)]="parentSelect" [value]="-1" (change)="value($event)"
                                                    style=" background-color: rgb(223, 222, 222); border: none;">
                                                <!-- <input type="checkbox"
                                                    style=" background-color: rgb(223, 222, 222); border: none;"
                                                    class="form-check-input"> -->
                                            </th>
                                            <th>Customer Name</th>
                                            <th>Email</th>
                                            <th>Address</th>
                                            <th>Registration Date</th>
                                            <th>Actions</th>
                                            <hr>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="text-muted" *ngFor="let cust of customer">
                                            <td><input #selectCust [value]="cust.id" [checked]="cust.selected"
                                                    (change)="value($event)" type="checkbox" class="form-check-input"
                                                    style=" background-color: rgb(223, 222, 222); border: none;"></td>
                                            <td>{{cust.customerName}}</td>
                                            <td>{{cust.emailAddress}}</td>
                                            <td>{{cust.address}}</td>
                                            <td>{{cust.registrationDate |date: 'dd-MM-yyyy'}}</td>


                                            <td>
                                                <div class="btn-group">
                                                    <div class="dropdown">
                                                        <button class="btn" type="button" id="dropdownMenuButton1"
                                                            data-bs-toggle="dropdown" aria-expanded="false">
                                                            <i class="bi bi-three-dots text-primary "
                                                                style="font-size: 24px;"></i>
                                                        </button>
                                                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                                                            <li><a (click)="viewUser(cust.id)"
                                                                    data-bs-target="#exampleModal"
                                                                    data-bs-toggle="modal"
                                                                    class="dropdown-item text-muted btn btn-outline-success"
                                                                    title="{{'View User' | localize}}"
                                                                    href="javascript:;">
                                                                    <i class="bi bi-aspect-ratio me-2"></i>View User</a>
                                                            </li>
                                                            <li><a class="dropdown-item text-muted"
                                                                    *ngIf="'Pages.Tenant.Customer.EditCustomer' | permission"
                                                                    (click)="editCustomerModal.show(cust.id)"
                                                                    title="{{'Edit Customer' | localize}}"
                                                                    href="javascript:;"> <i
                                                                        class="bi bi-pencil me-2"></i>Edit
                                                                    Customer</a></li>
                                                            <li><a class="dropdown-item text-muted" id="deleteCustomer"
                                                                    (click)="deleteCustomer(cust)"
                                                                    title="{{'Delete' | localize}}" href="javascript:;">
                                                                    <i class="bi bi-trash me-2"></i>Delete</a></li>
                                                        </ul>
                                                    </div>
                                                </div>


                                            </td>

                                            <div class="row">
                                                <div class="col-sm-12 kt-margin-t-20" *ngIf="cust===editingCustomer">
                                                    <table class="table table-hover">
                                                        <thead>
                                                            <tr>
                                                                <th style="width:10%"></th>
                                                                <th style="width:15%">{{"Customer"|localize}}</th>
                                                                <th style="width:15%">{{"User" | localize}}</th>
                                                                <th style="width:75%">{{"TotalBillingAmount" |
                                                                    localize}}</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr *ngFor="let user of cust.custUsers">
                                                                <td>
                                                                    <button
                                                                        *ngIf="'Pages.Tenant.Customer.EditCustomer' | permission"
                                                                        (click)="deleteUser(user, customer)"
                                                                        class="btn btn-outline-danger kt-btn kt-btn--icon kt-btn--icon-only kt-btn--pill">
                                                                        <i class="fa fa-trash"></i>
                                                                    </button>
                                                                </td>
                                                            <tr>
                                                                <td>{{cust.customerRefId}}</td>
                                                                <td>{{cust.userRefId}}</td>
                                                                <td>{{cust.totalBillingAmount}}</td>

                                                            </tr>
                                                            <tr
                                                                *ngIf="'Pages.Tenant.Customer.EditCustomer' | permission">
                                                                <td>
                                                                    <button (click)="saveUser()"
                                                                        class="btn btn-sm btn-success">
                                                                        <i class="fa fa-plus"></i>
                                                                    </button>
                                                                </td>
                                                                <td><input type="text" name="number"
                                                                        [(ngModel)]="newUser.customerRefId"
                                                                        class="form-control" /></td>
                                                                <td><input type="text" name="number"
                                                                        [(ngModel)]="newUser.userRefId"
                                                                        class="form-control" /></td>
                                                                <td><input type="text" name="number"
                                                                        [(ngModel)]="newUser.totalBillingAmount"
                                                                        class="form-control" />
                                                                </td>
                                                                <h2>{{cust.customerRefId}}</h2>
                                                                <h2>{{cust.userRefId}}</h2>
                                                                <h2>{{cust.totalBillingAmount}}</h2>
                                                            </tr>
                                                        </tbody>
                                                    </table>


                                                </div>
                                            </div>

                                        </tr>
                                    </tbody>


                                </table>

                                <nav class="navbar navbar-expand-lg navbar-light bg-white">
                                    <div class="container-fluid">

                                        <nav aria-label="Page navigation example" style="margin-left: -20px;">
                                            <ul class="Page pagination ">
                                                <li class="page-item bg-light-dark">
                                                    <a class="page-link" href="#" aria-label="Previous">
                                                        <span aria-hidden="true">&laquo;</span>
                                                    </a>
                                                </li>
                                                <li class="page-item bg-light-dark"><a class="page-link" href="#">
                                                        &lt;</a>
                                                </li>
                                                <li class="page-item" style="background-color: rgb(53,198,235);"><a
                                                        class="page-link" href="#">1</a></li>
                                                <li class="page-item"><a class="page-link" href="#">2</a></li>
                                                <li class="page-item"><a class="page-link" href="#">3</a></li>
                                                <li class="page-item"><a class="page-link" href="#">4</a></li>
                                                <li class="page-item"><a class="page-link" href="#">5</a></li>
                                                <li class="page-item bg-light-dark"><a class="page-link" href="#">
                                                        &gt;</a></li>
                                                <li class="page-item bg-light-dark">
                                                    <a class="page-link" href="#" aria-label="Next">
                                                        <span aria-hidden="true">&raquo;</span>
                                                    </a>
                                                </li>
                                            </ul>
                                        </nav>

                                        <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                                            data-bs-target="#navbarSupportedContent"
                                            aria-controls="navbarSupportedContent" aria-expanded="false"
                                            aria-label="Toggle navigation">
                                            <span class="navbar-toggler-icon"></span>
                                        </button>
                                        <div class="collapse navbar-collapse" id="navbarSupportedContent">
                                            <ul class="navbar-nav me-auto mb-2 mb-lg-0">

                                            </ul>
                                            <form class="d-flex">
                                                <div class="dropdown float-right">
                                                    <select class="form-select-sm"
                                                        style="color: rgb(51, 51, 51); background-color:  rgba(240, 239, 239, 0.801); font-size: 13px; border: none;"
                                                        aria-label="Default select example">
                                                        <option class="text" selected>10</option>
                                                    </select>
                                                    <span class=" mt-5 mr-3">showing 1-10 of 350</span>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </nav>



                                <!-- tableEnd -->
                            </div>

                        </div>

                    </div>



                </div>
                <!-- cend -->

                <!-- <div class="kt-subheader__main">
                    <h1 class="kt-subheader__title" style="margin-left:30% ; font-family:georgia,garamond,serif;">
                        <i class="fa fa-lg fa-customer"></i>
                        <span>{{"Customer Management" | localize}}</span>
                    </h1>
                </div> -->

                <!-- <div class="kt-subheader__toolbar">
                    <div class="kt-subheader__wrapper text-end">

                        <button (click)="deleteCustomerSelected()" class="btn btn-danger mt-3"><i
                                class="fa fa-trash"></i>
                            DeleteSelectedCustomer</button>
                    </div>
                </div> -->
            </div>
        </div>

        <!-- <h1 class="text-center">
            {{"AllCustomer" | localize}}({{customer.length}})</h1> -->





        <createCustomerModal #createCustomerModal (modalSave)="getCustomer()"></createCustomerModal>
        <editCustomerModal #editCustomerModal (modalSave)="getCustomer()"></editCustomerModal>
    </div>

</div>


<div bsModal #modal="bs-modal" class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog  modal-lg">
        <div class="modal-content p-5">
            <div class="row">
                <div class="col-md-6">
                    <h5 class="modal-title" id="exampleModalLabel">Customer User</h5>
                </div>
                <div class="col-md-5">
                    <div class="search-container  " style="margin-right: -20px;">
                        <div class="input-group rounded " id="searchbox1">
                            <input type="search" class="form-control rounded" placeholder="Search" aria-label="Search"
                                aria-describedby="search-addon" />
                            <span class="input-group-text border-0" id="search-addon"
                                style="background-color: white; border-top: 3px black; padding-right: 30px;">
                                <i class="fa fa-search "
                                    style="color: rgb(53,198,235);margin-left: -40px;z-index: 1;"></i>
                            </span>
    
                        </div>
                    </div>
                </div>
                <div class="col-md-1">
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
               
            </div>
            
            <div class="row">
                <div class="col-md-6 ">

                </div>
                <div class="col-md-6">
                    <!-- <div class="input-group">
                        <input [(ngModel)]="filter" name="filterText" autoFocus class="form-control"
                            [placeholder]="l('SearchWithThreeDot' | localize)" type="text">
                        <span class="input-group-btn">
                            <button (click)="getUser()" class="btn btn-primary" type="submit"><i
                                    class="flaticon-search-1"></i></button>
                        </span>
                    </div> -->
                    
                </div>
                <div class="modal-body">
                    <div class="form-group align-items-center">

                    </div>
                    <table class="table table-bordered table-hover  ">
                        <thead>
                            <tr class=" p-5">
                                <th>Id</th>
                                <th>Name</th>
                                <th>Surname</th>
                                <th>Email</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let user of custUser" class="bg-hover-light text-muted p-5">
                                <td>{{user.id}}</td>
                                <td>{{user.name}}</td>
                                <td>{{user.surname}}</td>
                                <td>{{user.emailAddress}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="modal-footer">

                    <nav class="navbar navbar-expand-lg navbar-light bg-white">
                        <div class="container-fluid">

                            <nav aria-label="Page navigation example" style="margin-right: 150px;">
                                <ul class="Page pagination ">
                                    <li class="page-item bg-light-dark">
                                        <a class="page-link" href="#" aria-label="Previous">
                                            <span aria-hidden="true">&laquo;</span>
                                        </a>
                                    </li>
                                    <li class="page-item bg-light-dark"><a class="page-link" href="#">
                                            &lt;</a>
                                    </li>
                                    <li class="page-item" style="background-color: rgb(53,198,235);"><a
                                            class="page-link" href="#">1</a></li>
                                    <li class="page-item"><a class="page-link" href="#">2</a></li>
                                    <li class="page-item"><a class="page-link" href="#">3</a></li>
                                    <li class="page-item"><a class="page-link" href="#">4</a></li>
                                    <li class="page-item"><a class="page-link" href="#">5</a></li>
                                    <li class="page-item bg-light-dark"><a class="page-link" href="#">
                                            &gt;</a></li>
                                    <li class="page-item bg-light-dark">
                                        <a class="page-link" href="#" aria-label="Next">
                                            <span aria-hidden="true">&raquo;</span>
                                        </a>
                                    </li>
                                </ul>
                            </nav>


                            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                                <ul class="navbar-nav me-auto mb-2 mb-lg-0">

                                </ul>
                                <form class="d-flex">
                                    <div class="dropdown float-right">
                                        <select class="form-select-sm"
                                            style="color: rgb(51, 51, 51); background-color:  rgba(240, 239, 239, 0.801); font-size: 13px; border: none;"
                                            aria-label="Default select example">
                                            <option class="text" selected>10</option>
                                        </select>
                                        <span class=" mt-5 mr-3">showing 1-10 of 350</span>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </nav>

                </div>
            </div>
        </div>
    </div>